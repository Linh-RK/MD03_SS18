<!DOCTYPE html>
<html style="height: auto; min-height: 100%;"
      lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<th:block th:insert="admin/layout/head.html"></th:block>
<body class="skin-blue sidebar-mini" style="height: auto; min-height: 100%;">
<!-- Site wrapper -->
<div class="wrapper" style="height: auto; min-height: 100%;">

    <th:block th:insert="admin/layout/header.html"></th:block>

    <!-- =============================================== -->

    <!-- Left side column. contains the sidebar -->
    <th:block th:insert="admin/layout/sidebar.html"></th:block>

    <!-- =============================================== -->

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" style="min-height: 669px;">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                DANH SACH SAN PHAM
            </h1>
        </section>
<!----------------search------------------------>
        <form method="get" th:object="${search}">
            <div class="form-group col-md-2">
                <label>Search</label>
                <input type="text"
                       class="form-control"
                       name="searchKey"
                       placeholder="Input keyword"
                       th:field="*{searchKey}"
                >
            </div>

            <div class="form-group col-md-2">
                <label>Category</label>
                <select name="categoryId" class="form-control">
                    <option value="-1">All category</option>
                    <option th:each="cate : ${categories}" th:value="${cate.id}"
                            th:text="${cate.name}"
                            th:selected="${cate.id == categoryId}">
                    </option>
                </select>
            </div>

            <div class="form-row">
                <div class="form-group col-md-2">
                    <label >Price min</label>
                    <input type="number" class="form-control" th:value="${priceMin}" name="priceMin" placeholder="_VND">
                </div>

                <div class="form-group col-md-2">
                    <label >Price max</label>
                    <input type="number" class="form-control" th:value="${priceMax}" name="priceMax" placeholder="_VND">
                </div>
            </div>
            <div class="form-group col-md-2">
                <label>Sort By</label>
                <select name="sort" class="form-control">
                    <option value="" th:selected="${sort}==''">No sorting</option>
                    <!--                    <option th:each="sort : ${sort}" th:value="${sort}" th:text="${sort}=='asc' ? 'Price: Low to High' : 'Price: High to Low'"></option>-->
                    <option  value="asc" th:selected="${sort}=='asc'">Price: Low to High</option>
                    <option  value="desc" th:selected="${sort}=='desc'">Price: High to Low</option>
                </select>
            </div>

            <div class="form-group col-md-2">
                <label>Page Size</label>
                <select name="pageSize" class="form-control">
                    <option th:value="5" th:selected="${pageSize}=='5'">5</option>
                    <option th:value="10" th:selected="${pageSize}=='10'">10</option>
                    <option th:value="15" th:selected="${pageSize}=='15'">15</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary " >Search</button>
            <a href="/admin/book/add" class="btn btn-success ">ADD NEW BOOK</a>
        </form>

        <!-- Main content -->
        <section class="content">

            <!-- Default box -->
            <div class="box">
                <div class="box-header with-border">
                    <h3 class="box-title">Title</h3>

                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                            <i class="fa fa-minus"></i></button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                            <i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>STT</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Author</th>
                            <th>Publisher</th>
                            <th>Price</th>
                            <th>Image</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="book, loop : ${books}">
                            <td scope="row" th:text="${loop.index + 1}"></td>
                            <td th:text="${book.name}"></td>
                            <td th:text="${book.category.name}"></td>
                            <td th:text="${book.author}"></td>
                            <td th:text="${book.publisher}"></td>
                            <td th:text="${book.price}"></td>
                            <td>
                            <td><img th:src="@{|/uploads/${book.image}|}"  alt="demo" width="100px"/></td>
                            </td>
                            <td th:text="${book.description}"></td>
                            <td th:text="${book.status}"></td>
                            <td>
                                <a th:href="@{/admin/book/edit/{id}(id=${book.id})}">EDIT</a>
                                <a th:href="@{/admin/book/delete/{id}(id=${book.id})}">DELETE</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <nav aria-label="Page navigation" class="text-center">
                        <ul class="pagination">
                            <li class="page-item" th:classappend="${page == 0 ? 'hidden':''}">
                                <a class="page-link" th:href="@{'/admin/book?page=' + ${page - 1}}" aria-label="Previous" >
                                    <label aria-hidden="true">&laquo;</label>
                                    <label class="sr-only">Previous</label>
                                </a>
                            </li>
                            <li class="page-item" th:each="i : ${#numbers.sequence(1,totalPages)}" th:classappend="${i == (page + 1) ? 'active':''}">
                                <a class="page-link" th:href="@{'/admin/book?page=' + ${i - 1}}" th:text="${i}"></a>
                            </li>
                            <!--      <li class="page-item"><a class="page-link" href="#"></a></li>-->

                            <li class="page-item" th:classappend="${page + 1 == totalPages ? 'hidden':''}">
                                <a class="page-link"  th:href="@{'/admin/book?page=' + ${page + 1}}" aria-label="Next" >
                                    <label aria-hidden="true">&raquo;</label>
                                    <label class="sr-only">Next</label>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
                <!-- /.box-body -->
                <div class="box-footer">
                    Footer
                </div>
                <!-- /.box-footer-->
            </div>
            <!-- /.box -->

        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <th:block th:insert="admin/layout/footer.html"></th:block>

</div>
<!-- ./wrapper -->

<!-- jQuery 3 -->

<th:block th:insert="admin/layout/script.html"></th:block>
</body></html>